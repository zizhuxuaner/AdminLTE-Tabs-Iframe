!function(){"use strict";function e(e){function t(t,n){var s,h,k=t==window,y=n&&void 0!==n.message?n.message:void 0;if(n=e.extend({},e.blockUI.defaults,n||{}),!n.ignoreIfBlocked||!e(t).data("blockUI.isBlocked")){if(n.overlayCSS=e.extend({},e.blockUI.defaults.overlayCSS,n.overlayCSS||{}),s=e.extend({},e.blockUI.defaults.css,n.css||{}),n.onOverlayClick&&(n.overlayCSS.cursor="pointer"),h=e.extend({},e.blockUI.defaults.themedCSS,n.themedCSS||{}),y=void 0===y?n.message:y,k&&p&&o(window,{fadeOut:0}),y&&"string"!=typeof y&&(y.parentNode||y.jquery)){var m=y.jquery?y[0]:y,v={};e(t).data("blockUI.history",v),v.el=m,v.parent=m.parentNode,v.display=m.style.display,v.position=m.style.position,v.parent&&v.parent.removeChild(m)}e(t).data("blockUI.onUnblock",n.onUnblock);var g,I,w,U,x=n.baseZ;g=e(r||n.forceIframe?'<iframe class="blockUI" style="z-index:'+x++ +';display:none;border:none;margin:0;padding:0;position:absolute;width:100%;height:100%;top:0;left:0" src="'+n.iframeSrc+'"></iframe>':'<div class="blockUI" style="display:none"></div>'),I=e(n.theme?'<div class="blockUI blockOverlay ui-widget-overlay" style="z-index:'+x++ +';display:none"></div>':'<div class="blockUI blockOverlay" style="z-index:'+x++ +';display:none;border:none;margin:0;padding:0;width:100%;height:100%;top:0;left:0"></div>'),n.theme&&k?(U='<div class="blockUI '+n.blockMsgClass+' blockPage ui-dialog ui-widget ui-corner-all" style="z-index:'+(x+10)+';display:none;position:fixed">',n.title&&(U+='<div class="ui-widget-header ui-dialog-titlebar ui-corner-all blockTitle">'+(n.title||"&nbsp;")+"</div>"),U+='<div class="ui-widget-content ui-dialog-content"></div>',U+="</div>"):n.theme?(U='<div class="blockUI '+n.blockMsgClass+' blockElement ui-dialog ui-widget ui-corner-all" style="z-index:'+(x+10)+';display:none;position:absolute">',n.title&&(U+='<div class="ui-widget-header ui-dialog-titlebar ui-corner-all blockTitle">'+(n.title||"&nbsp;")+"</div>"),U+='<div class="ui-widget-content ui-dialog-content"></div>',U+="</div>"):U=k?'<div class="blockUI '+n.blockMsgClass+' blockPage" style="z-index:'+(x+10)+';display:none;position:fixed"></div>':'<div class="blockUI '+n.blockMsgClass+' blockElement" style="z-index:'+(x+10)+';display:none;position:absolute"></div>',w=e(U),y&&(n.theme?(w.css(h),w.addClass("ui-widget-content")):w.css(s)),n.theme||I.css(n.overlayCSS),I.css("position",k?"fixed":"absolute"),(r||n.forceIframe)&&g.css("opacity",0);var C=[g,I,w],S=e(k?"body":t);e.each(C,function(){this.appendTo(S)}),n.theme&&n.draggable&&e.fn.draggable&&w.draggable({handle:".ui-dialog-titlebar",cancel:"li"});var O=f&&(!e.support.boxModel||e("object,embed",k?null:t).length>0);if(u||O){if(k&&n.allowBodyStretch&&e.support.boxModel&&e("html,body").css("height","100%"),(u||!e.support.boxModel)&&!k)var E=d(t,"borderTopWidth"),T=d(t,"borderLeftWidth"),M=E?"(0 - "+E+")":0,B=T?"(0 - "+T+")":0;e.each(C,function(e,t){var o=t[0].style;if(o.position="absolute",2>e)k?o.setExpression("height","Math.max(document.body.scrollHeight, document.body.offsetHeight) - (jQuery.support.boxModel?0:"+n.quirksmodeOffsetHack+') + "px"'):o.setExpression("height",'this.parentNode.offsetHeight + "px"'),k?o.setExpression("width",'jQuery.support.boxModel && document.documentElement.clientWidth || document.body.clientWidth + "px"'):o.setExpression("width",'this.parentNode.offsetWidth + "px"'),B&&o.setExpression("left",B),M&&o.setExpression("top",M);else if(n.centerY)k&&o.setExpression("top",'(document.documentElement.clientHeight || document.body.clientHeight) / 2 - (this.offsetHeight / 2) + (blah = document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + "px"'),o.marginTop=0;else if(!n.centerY&&k){var i=n.css&&n.css.top?parseInt(n.css.top,10):0,s="((document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + "+i+') + "px"';o.setExpression("top",s)}})}if(y&&(n.theme?w.find(".ui-widget-content").append(y):w.append(y),(y.jquery||y.nodeType)&&e(y).show()),(r||n.forceIframe)&&n.showOverlay&&g.show(),n.fadeIn){var j=n.onBlock?n.onBlock:c,H=n.showOverlay&&!y?j:c,z=y?j:c;n.showOverlay&&I._fadeIn(n.fadeIn,H),y&&w._fadeIn(n.fadeIn,z)}else n.showOverlay&&I.show(),y&&w.show(),n.onBlock&&n.onBlock.bind(w)();if(i(1,t,n),k?(p=w[0],b=e(n.focusableElements,p),n.focusInput&&setTimeout(l,20)):a(w[0],n.centerX,n.centerY),n.timeout){var W=setTimeout(function(){k?e.unblockUI(n):e(t).unblock(n)},n.timeout);e(t).data("blockUI.timeout",W)}}}function o(t,o){var s,l=t==window,a=e(t),d=a.data("blockUI.history"),c=a.data("blockUI.timeout");c&&(clearTimeout(c),a.removeData("blockUI.timeout")),o=e.extend({},e.blockUI.defaults,o||{}),i(0,t,o),null===o.onUnblock&&(o.onUnblock=a.data("blockUI.onUnblock"),a.removeData("blockUI.onUnblock"));var r;r=l?e("body").children().filter(".blockUI").add("body > .blockUI"):a.find(">.blockUI"),o.cursorReset&&(r.length>1&&(r[1].style.cursor=o.cursorReset),r.length>2&&(r[2].style.cursor=o.cursorReset)),l&&(p=b=null),o.fadeOut?(s=r.length,r.stop().fadeOut(o.fadeOut,function(){0===--s&&n(r,d,o,t)})):n(r,d,o,t)}function n(t,o,n,i){var s=e(i);if(!s.data("blockUI.isBlocked")){t.each(function(){this.parentNode&&this.parentNode.removeChild(this)}),o&&o.el&&(o.el.style.display=o.display,o.el.style.position=o.position,o.el.style.cursor="default",o.parent&&o.parent.appendChild(o.el),s.removeData("blockUI.history")),s.data("blockUI.static")&&s.css("position","static"),"function"==typeof n.onUnblock&&n.onUnblock(i,n);var l=e(document.body),a=l.width(),d=l[0].style.width;l.width(a-1).width(a),l[0].style.width=d}}function i(t,o,n){var i=o==window,l=e(o);if((t||(!i||p)&&(i||l.data("blockUI.isBlocked")))&&(l.data("blockUI.isBlocked",t),i&&n.bindEvents&&(!t||n.showOverlay))){var a="mousedown mouseup keydown keypress keyup touchstart touchend touchmove";t?e(document).bind(a,n,s):e(document).unbind(a,s)}}function s(t){if("keydown"===t.type&&t.keyCode&&9==t.keyCode&&p&&t.data.constrainTabKey){var o=b,n=!t.shiftKey&&t.target===o[o.length-1],i=t.shiftKey&&t.target===o[0];if(n||i)return setTimeout(function(){l(i)},10),!1}var s=t.data,a=e(t.target);return a.hasClass("blockOverlay")&&s.onOverlayClick&&s.onOverlayClick(t),a.parents("div."+s.blockMsgClass).length>0?!0:0===a.parents().children().filter("div.blockUI").length}function l(e){if(b){var t=b[e===!0?b.length-1:0];t&&t.focus()}}function a(e,t,o){var n=e.parentNode,i=e.style,s=(n.offsetWidth-e.offsetWidth)/2-d(n,"borderLeftWidth"),l=(n.offsetHeight-e.offsetHeight)/2-d(n,"borderTopWidth");t&&(i.left=s>0?s+"px":"0"),o&&(i.top=l>0?l+"px":"0")}function d(t,o){return parseInt(e.css(t,o),10)||0}e.fn._fadeIn=e.fn.fadeIn;var c=e.noop||function(){},r=/MSIE/.test(navigator.userAgent),u=/MSIE 6.0/.test(navigator.userAgent)&&!/MSIE 8.0/.test(navigator.userAgent),f=(document.documentMode||0,e.isFunction(document.createElement("div").style.setExpression));e.blockUI=function(e){t(window,e)},e.unblockUI=function(e){o(window,e)},e.growlUI=function(t,o,n,i){var s=e('<div class="growlUI"></div>');t&&s.append("<h1>"+t+"</h1>"),o&&s.append("<h2>"+o+"</h2>"),void 0===n&&(n=3e3);var l=function(t){t=t||{},e.blockUI({message:s,fadeIn:"undefined"!=typeof t.fadeIn?t.fadeIn:700,fadeOut:"undefined"!=typeof t.fadeOut?t.fadeOut:1e3,timeout:"undefined"!=typeof t.timeout?t.timeout:n,centerY:!1,showOverlay:!1,onUnblock:i,css:e.blockUI.defaults.growlCSS})};l();s.css("opacity");s.mouseover(function(){l({fadeIn:0,timeout:3e4});var t=e(".blockMsg");t.stop(),t.fadeTo(300,1)}).mouseout(function(){e(".blockMsg").fadeOut(1e3)})},e.fn.block=function(o){if(this[0]===window)return e.blockUI(o),this;var n=e.extend({},e.blockUI.defaults,o||{});return this.each(function(){var t=e(this);n.ignoreIfBlocked&&t.data("blockUI.isBlocked")||t.unblock({fadeOut:0})}),this.each(function(){"static"==e.css(this,"position")&&(this.style.position="relative",e(this).data("blockUI.static",!0)),this.style.zoom=1,t(this,o)})},e.fn.unblock=function(t){return this[0]===window?(e.unblockUI(t),this):this.each(function(){o(this,t)})},e.blockUI.version=2.7,e.blockUI.defaults={message:"<h1>Please wait...</h1>",title:null,draggable:!0,theme:!1,css:{padding:0,margin:0,width:"30%",top:"40%",left:"35%",textAlign:"center",color:"#000",border:"3px solid #aaa",backgroundColor:"#fff",cursor:"wait"},themedCSS:{width:"30%",top:"40%",left:"35%"},overlayCSS:{backgroundColor:"#000",opacity:.6,cursor:"wait"},cursorReset:"default",growlCSS:{width:"350px",top:"10px",left:"",right:"10px",border:"none",padding:"5px",opacity:.6,cursor:"default",color:"#fff",backgroundColor:"#000","-webkit-border-radius":"10px","-moz-border-radius":"10px","border-radius":"10px"},iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank",forceIframe:!1,baseZ:1e3,centerX:!0,centerY:!0,allowBodyStretch:!0,bindEvents:!0,constrainTabKey:!0,fadeIn:200,fadeOut:400,timeout:0,showOverlay:!0,focusInput:!0,focusableElements:":input:enabled:visible",onBlock:null,onUnblock:null,onOverlayClick:null,quirksmodeOffsetHack:4,blockMsgClass:"blockMsg",ignoreIfBlocked:!1};var p=null,b=[]}"function"==typeof define&&define.amd&&define.amd.jQuery?define(["jquery"],e):e(jQuery)}();var App=function(){var isRTL=false;var isIE8=false;var isIE9=false;var isIE10=false;var resizeHandlers=[];var basePath='../content/superui/';var globalImgPath='global/img/';var globalPluginsPath='base/plugins/';var globalCssPath='global/css/';var brandColors={'blue':'#89C4F4','red':'#F3565D','green':'#1bbc9b','purple':'#9b59b6','grey':'#95a5a6','yellow':'#F8CB00','lightblue':'#364150'};var handleInit=function(){if($('body').css('direction')==='rtl'){isRTL=true}isIE8=!!navigator.userAgent.match(/MSIE 8.0/);isIE9=!!navigator.userAgent.match(/MSIE 9.0/);isIE10=!!navigator.userAgent.match(/MSIE 10.0/);if(isIE10){$('html').addClass('ie10')}if(isIE10||isIE9||isIE8){$('html').addClass('ie')}};var _runResizeHandlers=function(){for(var i=0;i<resizeHandlers.length;i++){var each=resizeHandlers[i];each.call()}};var handleIframeContent=function(){var ht=$(window).height();var $footer=$(".main-footer");var $header=$(".main-header");var $tabs=$(".content-tabs");var height=App.getViewPort().height-$footer.outerHeight()-$header.outerHeight();if($tabs.is(":visible")){height=height-$tabs.outerHeight()}$(".tab_iframe").css({height:height,width:"100%"})};var handleIframeLayoutHeight=function(){var height=App.getViewPort().height-$('.page-footer').outerHeight()-$('.page-header').outerHeight()-$(".content-tabs").height();return height};var handleSiderBarmenu=function(){jQuery('.page-sidebar-menu').on('click',' li > a.iframeOpen',function(e){e.preventDefault();App.scrollTop();$("#iframe-main").attr("src",$(this).attr('href'))})};var isFullScreen=false;var requestFullScreen=function(){var de=document.documentElement;if(de.requestFullscreen){de.requestFullscreen()}else if(de.mozRequestFullScreen){de.mozRequestFullScreen()}else if(de.webkitRequestFullScreen){de.webkitRequestFullScreen()}else{App.alert({message:"该浏览器不支持全屏！",type:"danger"})}};var requestFullScreen2=function(element){var requestMethod=element.requestFullScreen||element.webkitRequestFullScreen||element.mozRequestFullScreen||element.msRequestFullScreen;if(requestMethod){requestMethod.call(element)}else if(typeof window.ActiveXObject!=="undefined"){var wscript=new ActiveXObject("WScript.Shell");if(wscript!==null){wscript.SendKeys("{F11}")}}};var exitFull=function(){var exitMethod=document.exitFullscreen||document.mozCancelFullScreen||document.webkitExitFullscreen||document.webkitExitFullscreen;if(exitMethod){exitMethod.call(document)}else if(typeof window.ActiveXObject!=="undefined"){var wscript=new ActiveXObject("WScript.Shell");if(wscript!==null){wscript.SendKeys("{F11}")}}};var handleOnResize=function(){var resize;if(isIE8){var currheight;$(window).resize(function(){if(currheight==document.documentElement.clientHeight){return}if(resize){clearTimeout(resize)}resize=setTimeout(function(){_runResizeHandlers();handleIframeContent()},50);currheight=document.documentElement.clientHeight})}else{$(window).resize(function(){if(resize){clearTimeout(resize)}resize=setTimeout(function(){_runResizeHandlers();handleIframeContent()},50)})}};var handlePortletTools=function(){$('body').on('click','.portlet > .portlet-title > .tools > a.remove',function(e){e.preventDefault();var portlet=$(this).closest(".portlet");if($('body').hasClass('page-portlet-fullscreen')){$('body').removeClass('page-portlet-fullscreen')}portlet.find('.portlet-title .fullscreen').tooltip('destroy');portlet.find('.portlet-title > .tools > .reload').tooltip('destroy');portlet.find('.portlet-title > .tools > .remove').tooltip('destroy');portlet.find('.portlet-title > .tools > .config').tooltip('destroy');portlet.find('.portlet-title > .tools > .collapse, .portlet > .portlet-title > .tools > .expand').tooltip('destroy');portlet.remove()});$('body').on('click','.portlet > .portlet-title .fullscreen',function(e){e.preventDefault();var portlet=$(this).closest(".portlet");if(portlet.hasClass('portlet-fullscreen')){$(this).removeClass('on');portlet.removeClass('portlet-fullscreen');$('body').removeClass('page-portlet-fullscreen');portlet.children('.portlet-body').css('height','auto')}else{var height=App.getViewPort().height-portlet.children('.portlet-title').outerHeight()-parseInt(portlet.children('.portlet-body').css('padding-top'))-parseInt(portlet.children('.portlet-body').css('padding-bottom'));$(this).addClass('on');portlet.addClass('portlet-fullscreen');$('body').addClass('page-portlet-fullscreen');portlet.children('.portlet-body').css('height',height)}});$('body').on('click','.portlet > .portlet-title > .tools > a.reload',function(e){e.preventDefault();var el=$(this).closest(".portlet").children(".portlet-body");var url=$(this).attr("data-url");var error=$(this).attr("data-error-display");if(url){App.blockUI({target:el,animate:true,overlayColor:'none'});$.ajax({type:"GET",cache:false,url:url,dataType:"html",success:function(res){App.unblockUI(el);el.html(res);App.initAjax()},error:function(xhr,ajaxOptions,thrownError){App.unblockUI(el);var msg='Error on reloading the content. Please check your connection and try again.';if(error=="toastr"&&toastr){toastr.error(msg)}else if(error=="notific8"&&$.notific8){$.notific8('zindex',11500);$.notific8(msg,{theme:'ruby',life:3000})}else{alert(msg)}}})}else{App.blockUI({target:el,animate:true,overlayColor:'none'});window.setTimeout(function(){App.unblockUI(el)},1000)}});$('.portlet .portlet-title a.reload[data-load="true"]').click();$('body').on('click','.portlet > .portlet-title > .tools > .collapse, .portlet .portlet-title > .tools > .expand',function(e){e.preventDefault();var el=$(this).closest(".portlet").children(".portlet-body");if($(this).hasClass("collapse")){$(this).removeClass("collapse").addClass("expand");el.slideUp(200)}else{$(this).removeClass("expand").addClass("collapse");el.slideDown(200)}})};var handleUniform=function(){if(!$().uniform){return}var test=$("input[type=checkbox]:not(.toggle, .md-check, .md-radiobtn, .make-switch, .icheck), input[type=radio]:not(.toggle, .md-check, .md-radiobtn, .star, .make-switch, .icheck)");if(test.size()>0){test.each(function(){if($(this).parents(".checker").size()===0){$(this).show();$(this).uniform()}})}};var handleMaterialDesign=function(){$('body').on('click','.md-checkbox > label, .md-radio > label',function(){var the=$(this);var el=$(this).children('span:first-child');el.addClass('inc');var newone=el.clone(true);el.before(newone);$("."+el.attr("class")+":last",the).remove()});if($('body').hasClass('page-md')){var element,circle,d,x,y;$('body').on('click','a.btn, button.btn, input.btn, label.btn',function(e){element=$(this);if(element.find(".md-click-circle").length==0){element.prepend("<span class='md-click-circle'></span>")}circle=element.find(".md-click-circle");circle.removeClass("md-click-animate");if(!circle.height()&&!circle.width()){d=Math.max(element.outerWidth(),element.outerHeight());circle.css({height:d,width:d})}x=e.pageX-element.offset().left-circle.width()/2;y=e.pageY-element.offset().top-circle.height()/2;circle.css({top:y+'px',left:x+'px'}).addClass("md-click-animate");setTimeout(function(){circle.remove()},1000)})}var handleInput=function(el){if(el.val()!=""){el.addClass('edited')}else{el.removeClass('edited')}};$('body').on('keydown','.form-md-floating-label .form-control',function(e){handleInput($(this))});$('body').on('blur','.form-md-floating-label .form-control',function(e){handleInput($(this))});$('.form-md-floating-label .form-control').each(function(){if($(this).val().length>0){$(this).addClass('edited')}})};var handleiCheck=function(){if(!$().iCheck){return}$('.icheck').each(function(){var checkboxClass=$(this).attr('data-checkbox')?$(this).attr('data-checkbox'):'icheckbox_minimal-grey';var radioClass=$(this).attr('data-radio')?$(this).attr('data-radio'):'iradio_minimal-grey';if(checkboxClass.indexOf('_line')>-1||radioClass.indexOf('_line')>-1){$(this).iCheck({checkboxClass:checkboxClass,radioClass:radioClass,insert:'<div class="icheck_line-icon"></div>'+$(this).attr("data-label")})}else{$(this).iCheck({checkboxClass:checkboxClass,radioClass:radioClass})}})};var handleBootstrapSwitch=function(){if(!$().bootstrapSwitch){return}$('.make-switch').bootstrapSwitch()};var handleBootstrapConfirmation=function(){if(!$().confirmation){return}$('[data-toggle=confirmation]').confirmation({container:'body',btnOkClass:'btn btn-sm btn-success',btnCancelClass:'btn btn-sm btn-danger'})};var handleAccordions=function(){$('body').on('shown.bs.collapse','.accordion.scrollable',function(e){App.scrollTo($(e.target))})};var handleTabs=function(){if(location.hash){var tabid=encodeURI(location.hash.substr(1));$('a[href="#'+tabid+'"]').parents('.tab-pane:hidden').each(function(){var tabid=$(this).attr("id");$('a[href="#'+tabid+'"]').click()});$('a[href="#'+tabid+'"]').click()}if($().tabdrop){$('.tabbable-tabdrop .nav-pills, .tabbable-tabdrop .nav-tabs').tabdrop({text:'<i class="fa fa-ellipsis-v"></i>&nbsp;<i class="fa fa-angle-down"></i>'})}};var handleModals=function(){$('body').on('hide.bs.modal',function(){if($('.modal:visible').size()>1&&$('html').hasClass('modal-open')===false){$('html').addClass('modal-open')}else if($('.modal:visible').size()<=1){$('html').removeClass('modal-open')}});$('body').on('show.bs.modal','.modal',function(){if($(this).hasClass("modal-scroll")){$('body').addClass("modal-open-noscroll")}});$('body').on('hide.bs.modal','.modal',function(){$('body').removeClass("modal-open-noscroll")});$('body').on('hidden.bs.modal','.modal:not(.modal-cached)',function(){$(this).removeData('bs.modal')})};var handleTooltips=function(){$('.tooltips').tooltip();$('.portlet > .portlet-title .fullscreen').tooltip({container:'body',title:'Fullscreen'});$('.portlet > .portlet-title > .tools > .reload').tooltip({container:'body',title:'Reload'});$('.portlet > .portlet-title > .tools > .remove').tooltip({container:'body',title:'Remove'});$('.portlet > .portlet-title > .tools > .config').tooltip({container:'body',title:'Settings'});$('.portlet > .portlet-title > .tools > .collapse, .portlet > .portlet-title > .tools > .expand').tooltip({container:'body',title:'Collapse/Expand'})};var handleDropdowns=function(){$('body').on('click','.dropdown-menu.hold-on-click',function(e){e.stopPropagation()})};var handleAlerts=function(){$('body').on('click','[data-close="alert"]',function(e){$(this).parent('.alert').hide();$(this).closest('.note').hide();e.preventDefault()});$('body').on('click','[data-close="note"]',function(e){$(this).closest('.note').hide();e.preventDefault()});$('body').on('click','[data-remove="note"]',function(e){$(this).closest('.note').remove();e.preventDefault()})};var handleDropdownHover=function(){$('[data-hover="dropdown"]').not('.hover-initialized').each(function(){$(this).dropdownHover();$(this).addClass('hover-initialized')})};var handleTextareaAutosize=function(){if(typeof(autosize)=="function"){autosize(document.querySelector('textarea.autosizeme'))}};var lastPopedPopover;var handlePopovers=function(){$('.popovers').popover();$(document).on('click.bs.popover.data-api',function(e){if(lastPopedPopover){lastPopedPopover.popover('hide')}})};var handleScrollers=function(){App.initSlimScroll('.scroller')};var handleFancybox=function(){if(!jQuery.fancybox){return}if($(".fancybox-button").size()>0){$(".fancybox-button").fancybox({groupAttr:'data-rel',prevEffect:'none',nextEffect:'none',closeBtn:true,helpers:{title:{type:'inside'}}})}};var handleCounterup=function(){if(!$().counterUp){return}$("[data-counter='counterup']").counterUp({delay:10,time:1000})};var handleFixInputPlaceholderForIE=function(){if(isIE8||isIE9){$('input[placeholder]:not(.placeholder-no-fix), textarea[placeholder]:not(.placeholder-no-fix)').each(function(){var input=$(this);if(input.val()===''&&input.attr("placeholder")!==''){input.addClass("placeholder").val(input.attr('placeholder'))}input.focus(function(){if(input.val()==input.attr('placeholder')){input.val('')}});input.blur(function(){if(input.val()===''||input.val()==input.attr('placeholder')){input.val(input.attr('placeholder'))}})})}};var handleSelect2=function(){if($().select2){$.fn.select2.defaults.set("theme","bootstrap");$('.select2me').select2({placeholder:"Select",width:'auto',allowClear:true})}};var handleHeight=function(){$('[data-auto-height]').each(function(){var parent=$(this);var items=$('[data-height]',parent);var height=0;var mode=parent.attr('data-mode');var offset=parseInt(parent.attr('data-offset')?parent.attr('data-offset'):0);items.each(function(){if($(this).attr('data-height')=="height"){$(this).css('height','')}else{$(this).css('min-height','')}var height_=(mode=='base-height'?$(this).outerHeight():$(this).outerHeight(true));if(height_>height){height=height_}});height=height+offset;items.each(function(){if($(this).attr('data-height')=="height"){$(this).css('height',height)}else{$(this).css('min-height',height)}});if(parent.attr('data-related')){$(parent.attr('data-related')).css('height',parent.height())}})};return{init:function(){handleInit();handleOnResize();handleMaterialDesign();handleUniform();handleiCheck();handleBootstrapSwitch();handleScrollers();handleFancybox();handleSelect2();handlePortletTools();handleAlerts();handleDropdowns();handleTabs();handleTooltips();handlePopovers();handleAccordions();handleModals();handleBootstrapConfirmation();handleTextareaAutosize();handleCounterup();handleSiderBarmenu();this.addResizeHandler(handleHeight);handleFixInputPlaceholderForIE()},initAjax:function(){handleUniform();handleiCheck();handleBootstrapSwitch();handleDropdownHover();handleScrollers();handleSelect2();handleFancybox();handleDropdowns();handleTooltips();handlePopovers();handleAccordions();handleBootstrapConfirmation()},handleFullScreen:function(){if(isFullScreen){exitFull();isFullScreen=false}else{requestFullScreen();isFullScreen=true}},fixIframeTab:function(){handleIframeContent()},getIframeLayoutHeight:function(){return handleIframeLayoutHeight()},initComponents:function(){this.initAjax()},fixIframeCotent:function(){setTimeout(function(){handleIframeContent()},50)},setLastPopedPopover:function(el){lastPopedPopover=el},addResizeHandler:function(func){resizeHandlers.push(func)},runResizeHandlers:function(){_runResizeHandlers()},scrollTo:function(el,offeset){var pos=(el&&el.size()>0)?el.offset().top:0;if(el){if($('body').hasClass('page-header-fixed')){pos=pos-$('.page-header').height()}else if($('body').hasClass('page-header-top-fixed')){pos=pos-$('.page-header-top').height()}else if($('body').hasClass('page-header-menu-fixed')){pos=pos-$('.page-header-menu').height()}pos=pos+(offeset?offeset:-1*el.height())}$('html,body').animate({scrollTop:pos},'slow')},initSlimScroll:function(el){$(el).each(function(){if($(this).attr("data-initialized")){return}var height;if($(this).attr("data-height")){height=$(this).attr("data-height")}else{height=$(this).css('height')}$(this).slimScroll({allowPageScroll:true,size:'7px',color:($(this).attr("data-handle-color")?$(this).attr("data-handle-color"):'#bbb'),wrapperClass:($(this).attr("data-wrapper-class")?$(this).attr("data-wrapper-class"):'slimScrollDiv'),railColor:($(this).attr("data-rail-color")?$(this).attr("data-rail-color"):'#eaeaea'),position:isRTL?'left':'right',height:height,alwaysVisible:($(this).attr("data-always-visible")=="1"?true:false),railVisible:($(this).attr("data-rail-visible")=="1"?true:false),disableFadeOut:true});$(this).attr("data-initialized","1")})},destroySlimScroll:function(el){$(el).each(function(){if($(this).attr("data-initialized")==="1"){$(this).removeAttr("data-initialized");$(this).removeAttr("style");var attrList={};if($(this).attr("data-handle-color")){attrList["data-handle-color"]=$(this).attr("data-handle-color")}if($(this).attr("data-wrapper-class")){attrList["data-wrapper-class"]=$(this).attr("data-wrapper-class")}if($(this).attr("data-rail-color")){attrList["data-rail-color"]=$(this).attr("data-rail-color")}if($(this).attr("data-always-visible")){attrList["data-always-visible"]=$(this).attr("data-always-visible")}if($(this).attr("data-rail-visible")){attrList["data-rail-visible"]=$(this).attr("data-rail-visible")}$(this).slimScroll({wrapperClass:($(this).attr("data-wrapper-class")?$(this).attr("data-wrapper-class"):'slimScrollDiv'),destroy:true});var the=$(this);$.each(attrList,function(key,value){the.attr(key,value)})}})},scrollTop:function(){App.scrollTo()},blockUI:function(options){options=$.extend(true,{},options);var html='';if(options.animate){html='<div class="loading-message '+(options.boxed?'loading-message-boxed':'')+'">'+'<div class="block-spinner-bar"><div class="bounce1"></div><div class="bounce2"></div><div class="bounce3"></div></div>'+'</div>'}else if(options.iconOnly){html='<div class="loading-message '+(options.boxed?'loading-message-boxed':'')+'"><img src="'+this.getGlobalImgPath()+'loading/loading-spinner-grey.gif" align=""></div>'}else if(options.textOnly){html='<div class="loading-message '+(options.boxed?'loading-message-boxed':'')+'"><span>&nbsp;&nbsp;'+(options.message?options.message:'LOADING...')+'</span></div>'}else{html='<div class="loading-message '+(options.boxed?'loading-message-boxed':'')+'"><img src="'+this.getGlobalImgPath()+'loading/loading-spinner-grey.gif" align=""><span>&nbsp;&nbsp;'+(options.message?options.message:'LOADING...')+'</span></div>'}if(options.target){var el=$(options.target);if(el.height()<=($(window).height())){options.cenrerY=true}el.block({message:html,baseZ:options.zIndex?options.zIndex:1000,centerY:options.cenrerY!==undefined?options.cenrerY:false,css:{top:'10%',border:'0',padding:'0',backgroundColor:'none'},overlayCSS:{backgroundColor:options.overlayColor?options.overlayColor:'#555',opacity:options.boxed?0.05:0.1,cursor:'wait'}})}else{$.blockUI({message:html,baseZ:options.zIndex?options.zIndex:1000,css:{border:'0',padding:'0',backgroundColor:'none'},overlayCSS:{backgroundColor:options.overlayColor?options.overlayColor:'#555',opacity:options.boxed?0.05:0.1,cursor:'wait'}})}},unblockUI:function(target){if(target){$(target).unblock({onUnblock:function(){$(target).css('position','');$(target).css('zoom','')}})}else{$.unblockUI()}},startPageLoading:function(options){if(options&&options.animate){$('.page-spinner-bar').remove();$('body').append('<div class="page-spinner-bar"><div class="bounce1"></div><div class="bounce2"></div><div class="bounce3"></div></div>')}else{$('.page-loading').remove();$('body').append('<div class="page-loading"><img src="'+this.getGlobalImgPath()+'loading/loading-spinner-grey.gif"/>&nbsp;&nbsp;<span>'+(options&&options.message?options.message:'Loading...')+'</span></div>')}},stopPageLoading:function(){$('.page-loading, .page-spinner-bar').remove()},alert:function(options){options=$.extend(true,{container:"",place:"append",type:'success',message:"",close:true,reset:true,focus:true,closeInSeconds:0,icon:""},options);var id=App.getUniqueID("App_alert");var html='<div id="'+id+'" class="custom-alerts alert alert-'+options.type+' fade in">'+(options.close?'<button type="button" class="close" data-dismiss="alert" aria-hidden="true"></button>':'')+(options.icon!==""?'<i class="fa-lg fa fa-'+options.icon+'"></i>  ':'')+options.message+'</div>';if(options.reset){$('.custom-alerts').remove()}if(!options.container){if($('.page-fixed-main-content').size()===1){$('.page-fixed-main-content').prepend(html)}else if(($('body').hasClass("page-container-bg-solid")||$('body').hasClass("page-content-white"))&&$('.page-head').size()===0){$('.page-title').after(html)}else{if($('.page-bar').size()>0){$('.page-bar').after(html)}else{$('.page-breadcrumb, .breadcrumbs').after(html)}}}else{if(options.place=="append"){$(options.container).append(html)}else{$(options.container).prepend(html)}}if(options.focus){App.scrollTo($('#'+id))}if(options.closeInSeconds>0){setTimeout(function(){$('#'+id).remove()},options.closeInSeconds*1000)}return id},initUniform:function(els){if(els){$(els).each(function(){if($(this).parents(".checker").size()===0){$(this).show();$(this).uniform()}})}else{handleUniform()}},updateUniform:function(els){$.uniform.update(els)},initFancybox:function(){handleFancybox()},getActualVal:function(el){el=$(el);if(el.val()===el.attr("placeholder")){return""}return el.val()},getURLParameter:function(paramName){var searchString=window.location.search.substring(1),i,val,params=searchString.split("&");for(i=0;i<params.length;i++){val=params[i].split("=");if(val[0]==paramName){return unescape(val[1])}}return null},isTouchDevice:function(){try{document.createEvent("TouchEvent");return true}catch(e){return false}},getViewPort:function(){var e=window,a='inner';if(!('innerWidth'in window)){a='client';e=document.documentElement||document.body}return{width:e[a+'Width'],height:e[a+'Height']}},getUniqueID:function(prefix){return'prefix_'+Math.floor(Math.random()*(new Date()).getTime())},isIE8:function(){return isIE8},isIE9:function(){return isIE9},isRTL:function(){return isRTL},isAngularJsApp:function(){return(typeof angular=='undefined')?false:true},getbasePath:function(){return basePath},setbasePath:function(path){basePath=path},setGlobalImgPath:function(path){globalImgPath=path},getGlobalImgPath:function(){return basePath+globalImgPath},setGlobalPluginsPath:function(path){globalPluginsPath=path},getGlobalPluginsPath:function(){return basePath+globalPluginsPath},getGlobalCssPath:function(){return basePath+globalCssPath},getBrandColor:function(name){if(brandColors[name]){return brandColors[name]}else{return''}},getResponsiveBreakpoint:function(size){var sizes={'xs':480,'sm':768,'md':992,'lg':1200};return sizes[size]?sizes[size]:0}}}();jQuery(document).ready(function(){App.init()});context=(function(){var options={fadeSpeed:100,filter:function($obj){},above:'auto',left:'auto',preventDoubleContext:true,compress:false};function initialize(opts){options=$.extend({},options,opts);$(document).on('click',function(){$('.dropdown-context').fadeOut(options.fadeSpeed,function(){$('.dropdown-context').css({display:''}).find('.drop-left').removeClass('drop-left')})});if(options.preventDoubleContext){$(document).on('contextmenu','.dropdown-context',function(e){e.preventDefault()})}$(document).on('mouseenter','.dropdown-submenu',function(){var $sub=$(this).find('.dropdown-context-sub:first'),subWidth=$sub.width(),subLeft=$sub.offset().left,collision=(subWidth+subLeft)>window.innerWidth;if(collision){$sub.addClass('drop-left')}})}function updateOptions(opts){options=$.extend({},options,opts)}function buildMenu(data,id,subMenu){var subClass=(subMenu)?' dropdown-context-sub':'',compressed=options.compress?' compressed-context':'',$menu=$('<ul class="dropdown-menu dropdown-context'+subClass+compressed+'" id="dropdown-'+id+'"></ul>');return buildMenuItems($menu,data,id,subMenu)}function buildMenuItems($menu,data,id,subMenu,addDynamicTag){var linkTarget='';for(var i=0;i<data.length;i++){if(typeof data[i].divider!=='undefined'){var divider='<li class="divider';divider+=(addDynamicTag)?' dynamic-menu-item':'';divider+='"></li>';$menu.append(divider)}else if(typeof data[i].header!=='undefined'){var header='<li class="nav-header';header+=(addDynamicTag)?' dynamic-menu-item':'';header+='">'+data[i].header+'</li>';$menu.append(header)}else if(typeof data[i].menu_item_src!=='undefined'){var funcName;if(typeof data[i].menu_item_src==='function'){if(data[i].menu_item_src.name===""){for(var globalVar in window){if(data[i].menu_item_src==window[globalVar]){funcName=globalVar;break}}}else{funcName=data[i].menu_item_src.name}}else{funcName=data[i].menu_item_src}$menu.append('<li class="dynamic-menu-src" data-src="'+funcName+'"></li>')}else{if(typeof data[i].href=='undefined'){data[i].href='javascript:;'}if(typeof data[i].target!=='undefined'){linkTarget=' target="'+data[i].target+'"'}if(typeof data[i].subMenu!=='undefined'){var sub_menu='<li class="dropdown-submenu';sub_menu+=(addDynamicTag)?' dynamic-menu-item':'';sub_menu+='"><a tabindex="-1" href="'+data[i].href+'">'+data[i].text+'</a></li>';$sub=(sub_menu)}else{var element='<li';element+=(addDynamicTag)?' class="dynamic-menu-item"':'';element+='><a tabindex="-1" href="'+data[i].href+'"'+linkTarget+'>';if(typeof data[i].icon!=='undefined')element+='<span class="glyphicon '+data[i].icon+'"></span> ';element+=data[i].text+'</a></li>';$sub=$(element)}if(typeof data[i].action!=='undefined'){$action=data[i].action;$sub.find('a').addClass('context-event').on('click',createCallback($action))}$menu.append($sub);if(typeof data[i].subMenu!='undefined'){var subMenuData=buildMenu(data[i].subMenu,id,true);$menu.find('li:last').append(subMenuData)}}if(typeof options.filter=='function'){options.filter($menu.find('li:last'))}}return $menu}function addContext(selector,data){if(typeof data.id!=='undefined'&&typeof data.data!=='undefined'){var id=data.id;$menu=$('body').find('#dropdown-'+id)[0];if(typeof $menu==='undefined'){$menu=buildMenu(data.data,id);$('body').append($menu)}}else{var d=new Date(),id=d.getTime(),$menu=buildMenu(data,id);$('body').append($menu)}$(selector).on('contextmenu',function(e){e.preventDefault();e.stopPropagation();rightClickEvent=e;currentContextSelector=$(this);$('.dropdown-context:not(.dropdown-context-sub)').hide();$dd=$('#dropdown-'+id);$dd.find('.dynamic-menu-item').remove();$dd.find('.dynamic-menu-src').each(function(idx,element){var menuItems=window[$(element).data('src')]($(selector));$parentMenu=$(element).closest('.dropdown-menu.dropdown-context');$parentMenu=buildMenuItems($parentMenu,menuItems,id,undefined,true)});if(typeof options.above=='boolean'&&options.above){$dd.addClass('dropdown-context-up').css({top:e.pageY-20-$('#dropdown-'+id).height(),left:e.pageX-13}).fadeIn(options.fadeSpeed)}else if(typeof options.above=='string'&&options.above=='auto'){$dd.removeClass('dropdown-context-up');var autoH=$dd.height()+12;if((e.pageY+autoH)>$('html').height()){$dd.addClass('dropdown-context-up').css({top:e.pageY-20-autoH,left:e.pageX-13}).fadeIn(options.fadeSpeed)}else{$dd.css({top:e.pageY+10,left:e.pageX-13}).fadeIn(options.fadeSpeed)}}if(typeof options.left=='boolean'&&options.left){$dd.addClass('dropdown-context-left').css({left:e.pageX-$dd.width()}).fadeIn(options.fadeSpeed)}else if(typeof options.left=='string'&&options.left=='auto'){$dd.removeClass('dropdown-context-left');var autoL=$dd.width()-12;if((e.pageX+autoL)>$('html').width()){$dd.addClass('dropdown-context-left').css({left:e.pageX-$dd.width()+13})}}})}function destroyContext(selector){$(document).off('contextmenu',selector).off('click','.context-event')}return{init:initialize,settings:updateOptions,attach:addContext,destroy:destroyContext}})();var createCallback=function(func){return function(event){func(event,currentContextSelector,rightClickEvent)}};var currentContextSelector=undefined;var rightClickEvent=undefined;(function($){$.fn.extend({slimScroll:function(options){var defaults={width:'auto',height:'250px',size:'7px',color:'#000',position:'right',distance:'1px',start:'top',opacity:.4,alwaysVisible:false,disableFadeOut:false,railVisible:false,railColor:'#333',railOpacity:.2,railDraggable:true,railClass:'slimScrollRail',barClass:'slimScrollBar',wrapperClass:'slimScrollDiv',allowPageScroll:false,wheelStep:20,touchScrollStep:200,borderRadius:'7px',railBorderRadius:'7px'};var o=$.extend(defaults,options);this.each(function(){var isOverPanel,isOverBar,isDragg,queueHide,touchDif,barHeight,percentScroll,lastScroll,divS='<div></div>',minBarHeight=30,releaseScroll=false;var me=$(this);if(me.parent().hasClass(o.wrapperClass)){var offset=me.scrollTop();bar=me.siblings('.'+o.barClass);rail=me.siblings('.'+o.railClass);getBarHeight();if($.isPlainObject(options)){if('height'in options&&options.height=='auto'){me.parent().css('height','auto');me.css('height','auto');var height=me.parent().parent().height();me.parent().css('height',height);me.css('height',height)}else if('height'in options){var h=options.height;me.parent().css('height',h);me.css('height',h)}if('scrollTo'in options){offset=parseInt(o.scrollTo)}else if('scrollBy'in options){offset+=parseInt(o.scrollBy)}else if('destroy'in options){bar.remove();rail.remove();me.unwrap();return}scrollContent(offset,false,true)}return}else if($.isPlainObject(options)){if('destroy'in options){return}}o.height=(o.height=='auto')?me.parent().height():o.height;var wrapper=$(divS).addClass(o.wrapperClass).css({position:'relative',overflow:'hidden',width:o.width,height:o.height});me.css({overflow:'hidden',width:o.width,height:o.height});var rail=$(divS).addClass(o.railClass).css({width:o.size,height:'100%',position:'absolute',top:0,display:(o.alwaysVisible&&o.railVisible)?'block':'none','border-radius':o.railBorderRadius,background:o.railColor,opacity:o.railOpacity,zIndex:90});var bar=$(divS).addClass(o.barClass).css({background:o.color,width:o.size,position:'absolute',top:0,opacity:o.opacity,display:o.alwaysVisible?'block':'none','border-radius':o.borderRadius,BorderRadius:o.borderRadius,MozBorderRadius:o.borderRadius,WebkitBorderRadius:o.borderRadius,zIndex:99});var posCss=(o.position=='right')?{right:o.distance}:{left:o.distance};rail.css(posCss);bar.css(posCss);me.wrap(wrapper);me.parent().append(bar);me.parent().append(rail);if(o.railDraggable){bar.bind("mousedown",function(e){var $doc=$(document);isDragg=true;t=parseFloat(bar.css('top'));pageY=e.pageY;$doc.bind("mousemove.slimscroll",function(e){currTop=t+e.pageY-pageY;bar.css('top',currTop);scrollContent(0,bar.position().top,false)});$doc.bind("mouseup.slimscroll",function(e){isDragg=false;hideBar();$doc.unbind('.slimscroll')});return false}).bind("selectstart.slimscroll",function(e){e.stopPropagation();e.preventDefault();return false})}rail.hover(function(){showBar()},function(){hideBar()});bar.hover(function(){isOverBar=true},function(){isOverBar=false});me.hover(function(){isOverPanel=true;showBar();hideBar()},function(){isOverPanel=false;hideBar()});me.bind('touchstart',function(e,b){if(e.originalEvent.touches.length){touchDif=e.originalEvent.touches[0].pageY}});me.bind('touchmove',function(e){if(!releaseScroll){e.originalEvent.preventDefault()}if(e.originalEvent.touches.length){var diff=(touchDif-e.originalEvent.touches[0].pageY)/o.touchScrollStep;scrollContent(diff,true);touchDif=e.originalEvent.touches[0].pageY}});getBarHeight();if(o.start==='bottom'){bar.css({top:me.outerHeight()-bar.outerHeight()});scrollContent(0,true)}else if(o.start!=='top'){scrollContent($(o.start).position().top,null,true);if(!o.alwaysVisible){bar.hide()}}attachWheel(this);function _onWheel(e){if(!isOverPanel){return}var e=e||window.event;var delta=0;if(e.wheelDelta){delta=-e.wheelDelta/120}if(e.detail){delta=e.detail/3}var target=e.target||e.srcTarget||e.srcElement;if($(target).closest('.'+o.wrapperClass).is(me.parent())){scrollContent(delta,true)}if(e.preventDefault&&!releaseScroll){e.preventDefault()}if(!releaseScroll){e.returnValue=false}}function scrollContent(y,isWheel,isJump){releaseScroll=false;var delta=y;var maxTop=me.outerHeight()-bar.outerHeight();if(isWheel){delta=parseInt(bar.css('top'))+y*parseInt(o.wheelStep)/100*bar.outerHeight();delta=Math.min(Math.max(delta,0),maxTop);delta=(y>0)?Math.ceil(delta):Math.floor(delta);bar.css({top:delta+'px'})}percentScroll=parseInt(bar.css('top'))/(me.outerHeight()-bar.outerHeight());delta=percentScroll*(me[0].scrollHeight-me.outerHeight());if(isJump){delta=y;var offsetTop=delta/me[0].scrollHeight*me.outerHeight();offsetTop=Math.min(Math.max(offsetTop,0),maxTop);bar.css({top:offsetTop+'px'})}me.scrollTop(delta);me.trigger('slimscrolling',~~delta);showBar();hideBar()}function attachWheel(target){if(window.addEventListener){target.addEventListener('DOMMouseScroll',_onWheel,false);target.addEventListener('mousewheel',_onWheel,false)}else{document.attachEvent("onmousewheel",_onWheel)}}function getBarHeight(){barHeight=Math.max((me.outerHeight()/me[0].scrollHeight)*me.outerHeight(),minBarHeight);bar.css({height:barHeight+'px'});var display=barHeight==me.outerHeight()?'none':'block';bar.css({display:display})}function showBar(){getBarHeight();clearTimeout(queueHide);if(percentScroll==~~percentScroll){releaseScroll=o.allowPageScroll;if(lastScroll!=percentScroll){var msg=(~~percentScroll==0)?'top':'bottom';me.trigger('slimscroll',msg)}}else{releaseScroll=false}lastScroll=percentScroll;if(barHeight>=me.outerHeight()){releaseScroll=true;return}bar.stop(true,true).fadeIn('fast');if(o.railVisible){rail.stop(true,true).fadeIn('fast')}}function hideBar(){if(!o.alwaysVisible){queueHide=setTimeout(function(){if(!(o.disableFadeOut&&isOverPanel)&&!isOverBar&&!isDragg){bar.fadeOut('slow');rail.fadeOut('slow')}},1000)}}});return this}});$.fn.extend({slimscroll:$.fn.slimScroll})})(jQuery);var pageIdField="data-pageId";function getPageId(element){if(element instanceof jQuery){return element.attr(pageIdField)}else{return $(element).attr(pageIdField)}}function findTabTitle(pageId){var $ele=null;$(".page-tabs-content").find("a.menu_tab").each(function(){var $a=$(this);if($a.attr(pageIdField)==pageId){$ele=$a;return false}});return $ele}function findTabPanel(pageId){var $ele=null;$("#tab-content").find("div.tab-pane").each(function(){var $div=$(this);if($div.attr(pageIdField)==pageId){$ele=$div;return false}});return $ele}function findIframeById(pageId){return findTabPanel(pageId).children("iframe")}function getActivePageId(){var $a=$('.page-tabs-content').find('.active');return getPageId($a)}function canRemoveTab(pageId){return findTabTitle(pageId).find('.fa-remove').size()>0}var addTabs=function(options){var defaultTabOptions={id:Math.random()*200,urlType:"relative",title:"新页面",ptype:''};options=$.extend(true,defaultTabOptions,options);var pageId=options.id;var ptype=options.ptype;if(findTabPanel(pageId)===null){var $title=$('<a href="javascript:;" data-ptype="'+ptype+'"></a>').attr(pageIdField,pageId).addClass("menu_tab");var $text=$("<span class='page_tab_title'></span>").text(options.title).appendTo($title);if(options.close){var $i=$("<i class='fa fa-remove page_tab_close' style='cursor: pointer' onclick='closeTab(this);'></i>").attr(pageIdField,pageId).appendTo($title)}$(".page-tabs-content").append($title);var $tabPanel=$('<div role="tabpanel" class="tab-pane"></div>').attr(pageIdField,pageId);if(options.content){$tabPanel.append(options.content)}else{App.blockUI({target:'#tab-content',boxed:true,message:'加载中......'});var $iframe=$("<iframe></iframe>").attr("src",options.url).css("width","100%").attr("frameborder","no").attr("id","iframe_"+pageId).addClass("tab_iframe").attr(pageIdField,pageId);$iframe.load(function(){App.unblockUI('#tab-content');App.fixIframeCotent()});$tabPanel.append($iframe)}$("#tab-content").append($tabPanel)}activeTabByPageId(pageId);TbasToLeftMenus(ptype,pageId)};var closeTab=function(item){var pageId=getPageId(item);closeTabByPageId(pageId)};function closeTabByPageId(pageId){var $title=findTabTitle(pageId);var $tabPanel=findTabPanel(pageId);if($title.hasClass("active")){var $nextTitle=$title.next();var activePageId;if($nextTitle.size()>0){activePageId=getPageId($nextTitle)}else{activePageId=getPageId($title.prev())}setTimeout(function(){activeTabByPageId(activePageId)},100)}else{}$title.remove();$tabPanel.remove()}function closeTabOnly(pageId){var $title=findTabTitle(pageId);var $tabPanel=findTabPanel(pageId);$title.remove();$tabPanel.remove()}var closeCurrentTab=function(){var pageId=getActivePageId();if(canRemoveTab(pageId)){closeTabByPageId(pageId)}};function refreshTabById(pageId){var $iframe=findIframeById(pageId);var url=$iframe.attr('src');if(url.indexOf(top.document.domain)<0){$iframe.attr("src",url)}else{$iframe[0].contentWindow.location.reload(true)}App.blockUI({target:'#tab-content',boxed:true,message:'Loading......'})}var refreshTab=function(){var pageId=getActivePageId();refreshTabById(pageId)};function getTabUrlById(pageId){var $iframe=findIframeById(pageId);return $iframe[0].contentWindow.location.href}function getTabUrl(element){var pageId=getPageId(element);getTabUrlById(pageId)}function editTabTitle(pageId,title){var $title=findTabTitle(pageId);var $span=$title.children("span.page_tab_title");$span.text(title)}var calSumWidth=function(element){var width=0;$(element).each(function(){width+=$(this).outerWidth(true)});return width};var scrollToTab=function(element){var marginLeftVal=calSumWidth($(element).prevAll()),marginRightVal=calSumWidth($(element).nextAll());var tabOuterWidth=calSumWidth($(".content-tabs").children().not(".menuTabs"));var visibleWidth=$(".content-tabs").outerWidth(true)-tabOuterWidth;var scrollVal=0;if($(".page-tabs-content").outerWidth()<visibleWidth){scrollVal=0}else if(marginRightVal<=(visibleWidth-$(element).outerWidth(true)-$(element).next().outerWidth(true))){if((visibleWidth-$(element).next().outerWidth(true))>marginRightVal){scrollVal=marginLeftVal;var tabElement=element;while((scrollVal-$(tabElement).outerWidth())>($(".page-tabs-content").outerWidth()-visibleWidth)){scrollVal-=$(tabElement).prev().outerWidth();tabElement=$(tabElement).prev()}}}else if(marginLeftVal>(visibleWidth-$(element).outerWidth(true)-$(element).prev().outerWidth(true))){scrollVal=marginLeftVal-$(element).prev().outerWidth(true)}$('.page-tabs-content').animate({marginLeft:0-scrollVal+'px'},"fast")};var scrollTabLeft=function(){var marginLeftVal=Math.abs(parseInt($('.page-tabs-content').css('margin-left')));var tabOuterWidth=calSumWidth($(".content-tabs").children().not(".menuTabs"));var visibleWidth=$(".content-tabs").outerWidth(true)-tabOuterWidth;var scrollVal=0;if($(".page-tabs-content").width()<visibleWidth){return false}else{var tabElement=$(".menu_tab:first");var offsetVal=0;while((offsetVal+$(tabElement).outerWidth(true))<=marginLeftVal){offsetVal+=$(tabElement).outerWidth(true);tabElement=$(tabElement).next()}offsetVal=0;if(calSumWidth($(tabElement).prevAll())>visibleWidth){while((offsetVal+$(tabElement).outerWidth(true))<(visibleWidth)&&tabElement.length>0){offsetVal+=$(tabElement).outerWidth(true);tabElement=$(tabElement).prev()}scrollVal=calSumWidth($(tabElement).prevAll())}}$('.page-tabs-content').animate({marginLeft:0-scrollVal+'px'},"fast")};var scrollTabRight=function(){var marginLeftVal=Math.abs(parseInt($('.page-tabs-content').css('margin-left')));var tabOuterWidth=calSumWidth($(".content-tabs").children().not(".menuTabs"));var visibleWidth=$(".content-tabs").outerWidth(true)-tabOuterWidth;var scrollVal=0;if($(".page-tabs-content").width()<visibleWidth){return false}else{var tabElement=$(".menu_tab:first");var offsetVal=0;while((offsetVal+$(tabElement).outerWidth(true))<=marginLeftVal){offsetVal+=$(tabElement).outerWidth(true);tabElement=$(tabElement).next()}offsetVal=0;while((offsetVal+$(tabElement).outerWidth(true))<(visibleWidth)&&tabElement.length>0){offsetVal+=$(tabElement).outerWidth(true);tabElement=$(tabElement).next()}scrollVal=calSumWidth($(tabElement).prevAll());if(scrollVal>0){$('.page-tabs-content').animate({marginLeft:0-scrollVal+'px'},"fast")}}};var closeOtherTabs=function(isAll){if(isAll){$('.page-tabs-content').children("["+pageIdField+"]").find('.fa-remove').parents('a').each(function(){var $a=$(this);var pageId=getPageId($a);closeTabOnly(pageId)});var firstChild=$(".page-tabs-content").children().eq(0);if(firstChild){activeTabByPageId(getPageId(firstChild))}}else{$('.page-tabs-content').children("["+pageIdField+"]").find('.fa-remove').parents('a').not(".active").each(function(){var $a=$(this);var pageId=getPageId($a);closeTabOnly(pageId)})}};function activeTabByPageId(pageId){$(".menu_tab").removeClass("active");$("#tab-content").find(".active").removeClass("active");var $title=findTabTitle(pageId).addClass('active');findTabPanel(pageId).addClass("active");scrollToTab($title[0])}$(function(){var $tabs=$(".menuTabs");$tabs.on("click",".menu_tab",function(){var pageId=getPageId(this);var ptype=$(this).data('ptype');activeTabByPageId(pageId);TbasToLeftMenus(ptype,pageId)});$tabs.on("dblclick",".menu_tab",function(){var pageId=getPageId(this);refreshTabById(pageId)});function findTabElement(target){var $ele=$(target);if(!$ele.is("a")){$ele=$ele.parents("a.menu_tab")}return $ele}context.init({preventDoubleContext:false,compress:true});context.attach('.page-tabs-content',[{text:'刷新',action:function(e,$selector,rightClickEvent){var pageId=getPageId(findTabElement(rightClickEvent.target));refreshTabById(pageId)}},])});function TopMenusToLeft(type){$.each($(".phpin-top-menu li.dropdown"),function(){if($(this).data('type')===type){$(this).addClass('active')}else{$(this).removeClass('active')}});$.each($(".phpin-sidebar-menu li.treeview"),function(){if($(this).data('type')===type){if(!$(this).hasClass('show')){$(this).removeClass('hide').addClass('show')}}else{$(this).removeClass('show').addClass('hide');if($(this).data('level')===0){$(this).removeClass('active');$(this).find('ul.treeview-menu').removeClass('menu-open').css('display','none')}}})}function TbasToLeftMenus(type,pageId){$.each($(".phpin-top-menu li.dropdown"),function(){if($(this).data('type')===type){$(this).addClass('active')}else{$(this).removeClass('active')}});$.each($(".phpin-sidebar-menu li.treeview"),function(){if($(this).data('type')==type){if(!$(this).hasClass('show')){$(this).removeClass('hide').addClass('show')}if($(this).data('tabid')==pageId){var pui=$(this).parent('ul.treeview-menu');var ppli=pui.parent('li.treeview');$(this).addClass("active").siblings().removeClass("active");pui.addClass('menu-open').css('display','block');ppli.removeClass('hide').addClass('show active')}else if($(this).data('level')==0){$(this).find('ul').css('display','none');$(this).removeClass('show active')}}else{$(this).removeClass('show').addClass('hide');if($(this).data('level')==0){$(this).removeClass('active');$(this).find('ul.treeview-menu').removeClass('menu-open').css('display','none')}}})}$(document).on('click','.phpin-sidebar-menu .menu-open li',function(){$(this).addClass("active").siblings().removeClass("active")});function SearchData(data,key){var arr=[],keyArr=[];key=key.trim();if(key.length===0){return false}else{keyArr=UniqueArray(key.split(/\s+/))}for(var i=0;i<keyArr.length;i++){arr=$.merge(arr,SearchKey(data,keyArr[i]))}arr=UniqueArray(arr);return arr}function SearchKey(data,key){var arr=[],exp=new RegExp(key);for(var i=0;i<data.length;i++){if(exp.test(data[i].text)||exp.test(data[i].pinyin)||exp.test(data[i].id)){arr.push(data[i])}}return arr}function UniqueArray(arr){return arr.filter(function(item,index,arr){return arr.indexOf(item,0)===index})}function SearchHtml(data,val){$('#search-resultbox').show();$('#searchresultboxmask').show();$('#search-results').html('<li><span class="no-results">搜索结果为空</span></li>');var result=SearchData(data,val);if(result.length>0){var resHtml='';for(var key in result){resHtml+=' <li><a href="javascript:;" onclick="addTabs({id:\''+result[key].id+'\',title: \''+result[key].id+'\',close: true,url: \''+result[key].url+'\', ptype: \''+result[key].ptype+'\'});"> <span class="title"><i class="'+result[key].icon+'"></i> '+result[key].text+'</span> <span class="description">路由：'+result[key].url+'</span> </a> </li>'}$('#search-results').html(resHtml)}}function SearchBox(data){var searchBox=$('#searchbox');searchBox.on("keyup",function(event){var query=$(this).val();if(query==''||event.which==27){$('#search-resultbox').hide();$('#searchresultboxmask').hide();return}else if(event.which==13){var selectedLink=$('#search-resultbox a.selected');if(selectedLink.length!=0){document.location=selectedLink.attr('href');return}}else if(event.which==38||event.which==40){$('#search-resultbox').show();$('#searchresultboxmask').show();var selected=$('#search-resultbox a.selected');if(selected.length==0){$('#search-results').find('a').first().addClass('selected')}else{var next;if(event.which==40){next=selected.parent().next().find('a').first()}else{next=selected.parent().prev().find('a').first()}if(next.length!=0){var resultbox=$('#search-results');var position=next.position();selected.removeClass('selected');next.addClass('selected')}}return}SearchHtml(data,query)});$(document).on("keyup",function(event){if(event.which==27){$('#search-resultbox').hide();$('#searchresultboxmask').hide()}});$(document).bind('click',function(e){$('#search-resultbox').hide();$('#searchresultboxmask').hide()});searchBox.bind('click',function(e){e.stopPropagation()})}
